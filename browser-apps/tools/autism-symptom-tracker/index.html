<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width,initial-scale=1" name="viewport"/>
    <title>Autism Symptom & Emotion Tracker</title>
    <meta content="Comprehensive autism symptom and emotion tracker with coping strategies, pattern recognition, and data visualization."
          name="description"/>
    <link href="style.css" rel="stylesheet"/>
</head>
<body>
<a class="skip" href="#app">Skip to main content</a>

<header class="site-header" role="banner">
    <div class="container header-inner">
        <div class="brand">
            <svg aria-hidden="true" class="logo" height="36" viewBox="0 0 24 24" width="36">
                <circle cx="12" cy="12" fill="#4f46e5" r="10"/>
                <path d="M8 12h8M8 16h6" stroke="#fff" stroke-linecap="round" stroke-width="1.5"/>
            </svg>
            <div class="title-wrap">
                <h1>Autism Symptom &amp; Emotion Tracker</h1>
                <p class="tagline">Track feelings, surface patterns, and get practical coping strategies.</p>
            </div>
        </div>

        <div aria-label="App actions" class="header-actions" role="toolbar">
            <button aria-label="Help" class="btn ghost" id="help-btn">Help</button>
            <button aria-controls="settings-dialog" aria-haspopup="dialog" class="btn ghost" id="open-settings">
                Settings
            </button>
        </div>
    </div>
</header>

<main aria-labelledby="app-title" class="container app-grid" id="app" role="main">
    <h2 class="sr-only" id="app-title">Tracker app</h2>

    <!-- Left column: Symptom selection -->
    <section aria-labelledby="symptom-heading" class="panel panel-left" id="symptom-panel">
        <div class="panel-head">
            <h2 id="symptom-heading">Symptoms &amp; States</h2>
            <p class="muted small">Select items that match how you feel. Adjust intensity when relevant.</p>
        </div>

        <div class="controls-row">
            <label class="search-wrap" for="search">
                <input aria-label="Filter symptoms" id="search" placeholder="Filter symptoms or tags"/>
            </label>
            <div class="controls-cta">
                <button class="btn btn-secondary" id="clear-btn" title="Clear selections">Clear</button>
            </div>
        </div>

        <form aria-describedby="symptom-help" id="symptom-form">
            <p class="muted" id="symptom-help">Tap to select; choose intensity if needed. Use Analyze for
                suggestions.</p>

            <div aria-live="polite" class="symptom-list" id="symptom-list" role="list"></div>

            <div class="actions-row">
                <button class="btn primary" id="analyze-btn" type="button">Analyze</button>
                <button class="btn btn-secondary" id="save-btn" title="Save entry to local history" type="button">Save
                    entry
                </button>
            </div>
        </form>
    </section>

    <!-- Right column top: Suggestions + pattern insights -->
    <section aria-labelledby="results-heading" class="panel panel-right" id="result-panel">
        <div class="panel-head">
            <h2 id="results-heading">Suggestions &amp; Insights</h2>
            <p class="muted small">Get prioritized strategies and pattern recognition from your entries.</p>
        </div>

        <div class="result-summary muted" id="result-summary">No analysis yet. Pick symptoms and press Analyze.</div>

        <div aria-live="polite" class="suggestions" id="suggestions"></div>

        <div aria-live="polite" class="pattern-insights" id="pattern-insights-wrap">
            <h3>Pattern Recognition</h3>
            <div class="pattern-insights-content" id="pattern-insights">
                <p class="muted">Pattern insights will appear here after multiple entries.</p>
            </div>
        </div>

        <details aria-label="How this works" class="notes" id="explain-details">
            <summary>How this works</summary>
            <p>This tool uses weighted tag scoring to suggest strategies. It is not medical advice. If in crisis,
                contact local emergency services or a professional.</p>
        </details>
    </section>

    <!-- Full width: History and charts -->
    <section aria-labelledby="history-heading" class="panel panel-bottom" id="history-panel">
        <div class="panel-head row-between">
            <div>
                <h2 id="history-heading">History &amp; Patterns</h2>
                <p class="muted small">Entries are stored locally. Export backups or import JSON to merge history.</p>
            </div>
            <div aria-label="Export and import actions" class="export-actions" role="group">
                <button class="btn btn-secondary" id="export-csv-btn" title="Export history as CSV">Export CSV</button>
                <button class="btn btn-secondary" id="export-json-btn" title="Export as JSON">Export JSON</button>
                <button class="btn btn-secondary" id="import-json-btn" title="Import JSON backup">Import JSON</button>
            </div>
        </div>

        <div aria-live="polite" class="history-list" id="history-list"></div>

        <div class="history-footer">
            <div class="history-actions">
                <button class="btn ghost" id="clear-history" title="Remove all saved entries">Clear All</button>
            </div>

            <div class="charts">
                <div class="chart-wrap">
                    <h3 class="chart-title">Tag frequency (history)</h3>
                    <canvas aria-label="Tag frequency chart" height="160" id="tag-chart" width="400"></canvas>
                </div>

                <div class="chart-wrap">
                    <h3 class="chart-title">Symptom patterns</h3>
                    <canvas aria-label="Symptom frequency chart" height="160" id="symptom-chart" width="400"></canvas>
                </div>
            </div>
        </div>
    </section>
</main>

<footer class="site-footer" role="contentinfo">
    <div class="container footer-inner">
        <small>Â© 2025 Autism Symptom Tracker - Jericho Crosby (Chalwk)</small>
    </div>
</footer>

<!-- Dialogs -->
<dialog aria-labelledby="settings-title" id="settings-dialog">
    <form class="dialog-form" method="dialog">
        <h3 id="settings-title">Settings</h3>

        <label class="field">
            <span>Max history entries</span>
            <input id="max-history" max="10000" min="5" type="number"/>
        </label>

        <label class="checkbox">
            <input id="enable-notifications" type="checkbox"/>
            <span>Enable reminder notifications</span>
        </label>

        <label class="checkbox">
            <input id="enable-sounds" type="checkbox"/>
            <span>Enable interface sounds</span>
        </label>

        <div class="muted small">Data remains local. Use Export to back up. Import will merge entries.</div>

        <menu class="dialog-actions">
            <button class="btn primary" id="save-settings">Save</button>
            <button class="btn btn-secondary" id="close-settings">Close</button>
        </menu>
    </form>
</dialog>

<dialog aria-labelledby="help-title" id="help-dialog">
    <form class="dialog-form" method="dialog">
        <h3 id="help-title">Quick help</h3>
        <p class="muted">Select symptoms, set intensity, Analyze to view suggestions, then Save to keep an entry. Export
            regularly to backup.</p>
        <menu class="dialog-actions">
            <button class="btn btn-secondary" id="close-help">Close</button>
        </menu>
    </form>
</dialog>

<input accept="application/json" id="file-input" style="display:none" type="file"/>

<script defer src="script.js"></script>
</body>
</html>