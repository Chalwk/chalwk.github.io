<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="#4a86e8" name="theme-color">
    <meta content="‚ö†Ô∏è Check an item to indicate that it needs to be purchased." name="description">
    <title>üõí Grocery List</title>
    <link href="style.css" rel="stylesheet">
    <link href="manifest.json" rel="manifest">
    <link href="icons/icon-192x192.png" rel="icon" type="image/png">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="default" name="apple-mobile-web-app-status-bar-style">
    <meta content="Grocery List" name="apple-mobile-web-app-title">
    <link href="icons/icon-192x192.png" rel="apple-touch-icon">
</head>
<body>
<header>
    <h1>üõí Grocery List</h1>
    <p class="subtitle">‚ö†Ô∏è Check an item to indicate that it needs to be purchased.</p>

    <div class="search-container">
        <label for="searchInput"></label><input id="searchInput" placeholder="Search groceries..." type="text">
    </div>

    <div class="controls">
        <button class="control-btn active" data-filter="all">All Items</button>
        <button class="control-btn" data-filter="needed">Items Needed</button>

        <!-- Dropdown Menu -->
        <div class="dropdown">
            <button class="control-btn dropdown-toggle">More Actions</button>
            <div class="dropdown-content">
                <button class="control-btn" id="clearAll">Clear All</button>
                <button class="control-btn" id="exportBtn">Export List</button>
                <button class="control-btn" id="importBtn">Import List</button>
                <button class="control-btn" id="addCategoryBtn">Add Category</button>
                <button class="control-btn" id="addItemBtn">Add Item</button>
            </div>
        </div>
    </div>

    <div class="stats">
        <div class="stat-item">
            <div class="stat-value" id="totalItems">0</div>
            <div class="stat-label">Total Items</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="neededItems">0</div>
            <div class="stat-label">Items Needed</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="totalPrice">$0.00</div>
            <div class="stat-label">Total Price</div>
        </div>
    </div>
</header>

<main>
    <!-- Grocery categories will be generated by JavaScript -->
</main>

<!-- Modal for adding/editing categories -->
<div class="modal" id="categoryModal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="categoryModalTitle">Add Category</h2>
        <form id="categoryForm">
            <label for="categoryName">Category Name:</label>
            <input id="categoryName" required type="text">
            <div class="modal-buttons">
                <button type="submit">Save</button>
                <button id="cancelCategory" type="button">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal for adding/editing items -->
<div class="modal" id="itemModal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="itemModalTitle">Add Item</h2>
        <form id="itemForm">
            <label for="itemCategory">Category:</label>
            <select id="itemCategory" required>
                <!-- Categories will be populated by JavaScript -->
            </select>

            <label for="itemName">Item Name:</label>
            <input id="itemName" required type="text">

            <label for="itemPrice">Price:</label>
            <input id="itemPrice" placeholder="$0.00" type="text">

            <label for="itemLocation">Store/Location:</label>
            <input id="itemLocation" type="text">

            <label for="itemDescription">Description:</label>
            <textarea id="itemDescription" rows="3"></textarea>

            <div class="modal-buttons">
                <button type="submit">Save</button>
                <button id="cancelItem" type="button">Cancel</button>
                <button id="deleteItem" style="display: none; background-color: #e74c3c;" type="button">Delete</button>
            </div>
        </form>
    </div>
</div>

<!-- Hidden file input for import -->
<input accept=".json" id="importFile" style="display: none;" type="file">

<script src="script.js"></script>
<script>
    // Register service worker for PWA functionality
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('sw.js')
                .then(function(registration) {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
                .catch(function(error) {
                console.log('ServiceWorker registration failed: ', error);
            });
        });
    }
</script>
</body>
</html>