<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="theme-color" content="#4a86e8">
    <meta name="description" content="‚ö†Ô∏è Check an item to indicate that it needs to be purchased.">
    <title>üõí Grocery List</title>
    <link href="style.css" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/icon-192x192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Grocery List">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
</head>
<body>
<header>
    <h1>üõí Grocery List</h1>
    <p class="subtitle">‚ö†Ô∏è Check an item to indicate that it needs to be purchased.</p>

    <div class="search-container">
        <label for="searchInput"></label><input id="searchInput" placeholder="Search groceries..." type="text">
    </div>

    <div class="controls">
        <button class="control-btn active" data-filter="all">All Items</button>
        <button class="control-btn" data-filter="needed">Items Needed</button>

        <!-- Dropdown Menu -->
        <div class="dropdown">
            <button class="control-btn dropdown-toggle">More Actions ‚ñæ</button>
            <div class="dropdown-content">
                <button class="control-btn" id="clearAll">Clear All</button>
                <button class="control-btn" id="exportBtn">Export List</button>
                <button class="control-btn" id="importBtn">Import List</button>
                <button class="control-btn" id="addCategoryBtn">Add Category</button>
                <button class="control-btn" id="addItemBtn">Add Item</button>
            </div>
        </div>
    </div>

    <div class="stats">
        <div class="stat-item">
            <div class="stat-value" id="totalItems">0</div>
            <div class="stat-label">Total Items</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="neededItems">0</div>
            <div class="stat-label">Items Needed</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="totalPrice">$0.00</div>
            <div class="stat-label">Total Price</div>
        </div>
    </div>
</header>

<main>
    <!-- Grocery categories will be generated by JavaScript -->
</main>

<!-- Modal for adding/editing categories -->
<div id="categoryModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="categoryModalTitle">Add Category</h2>
        <form id="categoryForm">
            <label for="categoryName">Category Name:</label>
            <input type="text" id="categoryName" required>
            <div class="modal-buttons">
                <button type="submit">Save</button>
                <button type="button" id="cancelCategory">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal for adding/editing items -->
<div id="itemModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="itemModalTitle">Add Item</h2>
        <form id="itemForm">
            <label for="itemCategory">Category:</label>
            <select id="itemCategory" required>
                <!-- Categories will be populated by JavaScript -->
            </select>

            <label for="itemName">Item Name:</label>
            <input type="text" id="itemName" required>

            <label for="itemPrice">Price:</label>
            <input type="text" id="itemPrice" placeholder="$0.00">

            <label for="itemLocation">Store/Location:</label>
            <input type="text" id="itemLocation">

            <label for="itemDescription">Description:</label>
            <textarea id="itemDescription" rows="3"></textarea>

            <div class="modal-buttons">
                <button type="submit">Save</button>
                <button type="button" id="cancelItem">Cancel</button>
                <button type="button" id="deleteItem" style="display: none; background-color: #e74c3c;">Delete</button>
            </div>
        </form>
    </div>
</div>

<!-- Hidden file input for import -->
<input type="file" id="importFile" accept=".json" style="display: none;">

<script src="script.js"></script>
<script>
    // Register service worker for PWA functionality
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('sw.js')
                .then(function(registration) {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
                .catch(function(error) {
                console.log('ServiceWorker registration failed: ', error);
            });
        });
    }
</script>
</body>
</html>