<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <title>Communication Board</title>
    <link href="style.css" rel="stylesheet">
</head>
<body>
<div class="app-container">
    <header class="app-header">
        <div class="header-left">
            <h1>Communication Board</h1>
            <div class="header-sub">
                <label class="visually-hidden" for="categoryPills">Filter symbols by category</label>
                <div aria-hidden="false" class="category-pills" id="categoryPills"></div>
            </div>
        </div>

        <div class="header-controls">
            <label class="visually-hidden" for="voiceSelect">Choose voice</label>
            <select id="voiceSelect" title="Choose TTS voice"></select>

            <button class="btn-secondary" id="undoBtn" title="Undo last phrase edit">Undo</button>
            <button class="btn-secondary" id="editModeBtn">Edit Mode</button>
            <button class="btn-primary" id="saveBtn">Save</button>

            <div class="small-controls">
                <button class="btn-secondary" id="toggleDarkBtn" title="Toggle dark mode">Dark</button>
                <button class="btn-secondary" id="syncBtn" title="Cloud sync (optional)">Sync</button>
            </div>
        </div>
    </header>

    <div class="edit-banner" hidden id="editBanner">
        Edit mode active. Click a tile to edit it.
        <button class="btn-secondary" id="exitEditBtn">Exit Edit Mode</button>
    </div>

    <div class="main-content">
        <div class="phrase-bar">
            <div aria-live="polite" class="phrase-display" id="phraseDisplay" role="list">
                <span class="empty-message">Select symbols to build your phrase</span>
            </div>
            <div class="phrase-controls">
                <button class="btn-primary" id="speakBtn">Speak</button>
                <button class="btn-secondary" id="clearBtn">Clear</button>
                <button class="btn-secondary" id="exportBtn" title="Export symbols and settings">Export</button>
                <label class="btn-secondary" for="importFile" title="Import symbols">
                    Import
                    <input accept="application/json" id="importFile" style="display:none" type="file">
                </label>
            </div>
        </div>

        <div aria-label="Communication board" class="board-container" id="boardWrap" tabindex="0">
            <div class="communication-board" id="communicationBoard" role="list">
                <!-- Symbols will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div aria-hidden="true" aria-labelledby="modalTitle" aria-modal="true" class="modal" id="editModal" role="dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Edit Symbol</h2>
                <span aria-label="Close" class="close" id="closeModal" role="button">&times;</span>
            </div>
            <div class="modal-body">
                <form id="symbolForm">
                    <div class="form-group">
                        <label for="symbolText">Text</label>
                        <input id="symbolText" required type="text">
                    </div>
                    <div class="form-group">
                        <label for="symbolImage">Image URL or emoji</label>
                        <input id="symbolImage" placeholder="https:// or data:, or emoji" type="text">
                        <small>Or upload an image file</small>
                        <input accept="image/*" id="symbolImageFile" type="file">
                    </div>
                    <div class="form-group">
                        <label for="symbolColor">Background color</label>
                        <input id="symbolColor" type="color" value="#4a86e8">
                    </div>
                    <div class="form-group">
                        <label for="symbolCategory">Category</label>
                        <select id="symbolCategory">
                            <option value="Basic">Basic</option>
                            <option value="Needs">Needs</option>
                            <option value="Places">Places</option>
                            <option value="Actions">Actions</option>
                            <option value="Feelings">Feelings</option>
                            <option value="People">People</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button class="btn-danger" id="deleteBtn" type="button">Delete</button>
                        <div style="display:flex; gap:8px">
                            <button class="btn-secondary" id="cancelEdit" type="button">Cancel</button>
                            <button class="btn-primary" type="submit">Save Changes</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Symbol Button -->
    <button aria-label="Add new symbol" class="floating-btn" id="addSymbolBtn" title="Add New Symbol">+</button>
</div>

<!-- Toast area -->
<div aria-atomic="true" aria-live="assertive" class="toast" id="toast"></div>

<script defer src="script.js"></script>
</body>
</html>
