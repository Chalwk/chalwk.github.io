<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Autism Symptom & Emotion Tracker</title>
    <meta name="description"
          content="Comprehensive autism symptom and emotion tracker with coping strategies, pattern recognition, and data visualization." />
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<a class="skip" href="#app">Skip to main content</a>

<header class="site-header" role="banner">
    <div class="container header-inner">
        <div class="brand">
            <svg class="logo" viewBox="0 0 24 24" width="36" height="36" aria-hidden="true">
                <circle cx="12" cy="12" r="10" fill="#2563eb" />
                <path d="M8 12h8M8 16h6" stroke="#fff" stroke-width="1.5" stroke-linecap="round" />
            </svg>
            <div class="title-wrap">
                <h1>Autism Symptom &amp; Emotion Tracker</h1>
                <p class="tagline">Track feelings, surface patterns, and get practical coping strategies.</p>
            </div>
        </div>

        <div class="header-actions" role="toolbar" aria-label="App actions">
            <button id="help-btn" class="btn ghost" aria-label="Help">Help</button>
            <button id="open-settings" class="btn ghost" aria-haspopup="dialog" aria-controls="settings-dialog">Settings</button>
        </div>
    </div>
</header>

<main id="app" class="container app-grid" role="main" aria-labelledby="app-title">
    <h2 id="app-title" class="sr-only">Tracker app</h2>

    <!-- Left column: Symptom selection -->
    <section id="symptom-panel" class="panel panel-left" aria-labelledby="symptom-heading">
        <div class="panel-head">
            <h2 id="symptom-heading">Symptoms &amp; States</h2>
            <p class="muted small">Select items that match how you feel. Adjust intensity when relevant.</p>
        </div>

        <div class="controls-row">
            <label class="search-wrap" for="search">
                <input id="search" placeholder="Filter symptoms or tags" aria-label="Filter symptoms" />
            </label>
            <div class="controls-cta">
                <button id="clear-btn" class="btn" title="Clear selections">Clear</button>
            </div>
        </div>

        <form id="symptom-form" aria-describedby="symptom-help">
            <p id="symptom-help" class="muted">Tap to select; choose intensity if needed. Use Analyze for suggestions.</p>

            <div id="symptom-list" class="symptom-list" role="list" aria-live="polite"></div>

            <div class="actions-row">
                <button id="analyze-btn" class="btn primary" type="button">Analyze</button>
                <button id="save-btn" class="btn" type="button" title="Save entry to local history">Save entry</button>
            </div>
        </form>
    </section>

    <!-- Right column top: Suggestions + pattern insights -->
    <section id="result-panel" class="panel panel-right" aria-labelledby="results-heading">
        <div class="panel-head">
            <h2 id="results-heading">Suggestions &amp; Insights</h2>
            <p class="muted small">Get prioritized strategies and pattern recognition from your entries.</p>
        </div>

        <div id="result-summary" class="result-summary muted">No analysis yet. Pick symptoms and press Analyze.</div>

        <div id="suggestions" class="suggestions" aria-live="polite"></div>

        <div class="pattern-insights" aria-live="polite" id="pattern-insights-wrap">
            <h3>Pattern Recognition</h3>
            <div id="pattern-insights" class="pattern-insights-content">
                <p class="muted">Pattern insights will appear here after multiple entries.</p>
            </div>
        </div>

        <details id="explain-details" class="notes" aria-label="How this works">
            <summary>How this works</summary>
            <p>This tool uses weighted tag scoring to suggest strategies. It is not medical advice. If in crisis, contact local emergency services or a professional.</p>
        </details>
    </section>

    <!-- Full width: History and charts -->
    <section id="history-panel" class="panel panel-bottom" aria-labelledby="history-heading">
        <div class="panel-head row-between">
            <div>
                <h2 id="history-heading">History &amp; Patterns</h2>
                <p class="muted small">Entries are stored locally. Export backups or import JSON to merge history.</p>
            </div>
            <div class="export-actions" role="group" aria-label="Export and import actions">
                <button id="export-csv-btn" class="btn" title="Export history as CSV">Export CSV</button>
                <button id="export-json-btn" class="btn" title="Export as JSON">Export JSON</button>
                <button id="import-json-btn" class="btn" title="Import JSON backup">Import JSON</button>
            </div>
        </div>

        <div id="history-list" class="history-list" aria-live="polite"></div>

        <div class="history-footer">
            <div class="history-actions">
                <button id="clear-history" class="btn ghost" title="Remove all saved entries">Clear All</button>
            </div>

            <div class="charts">
                <div class="chart-wrap">
                    <h3 class="chart-title">Tag frequency (history)</h3>
                    <canvas id="tag-chart" aria-label="Tag frequency chart" width="400" height="160"></canvas>
                </div>

                <div class="chart-wrap">
                    <h3 class="chart-title">Symptom patterns</h3>
                    <canvas id="symptom-chart" aria-label="Symptom frequency chart" width="400" height="160"></canvas>
                </div>
            </div>
        </div>
    </section>
</main>

<footer class="site-footer" role="contentinfo">
    <div class="container footer-inner">
        <small>© Autism Symptom Tracker — Not medical advice. Data stored locally only.</small>
        <div class="footer-links">
            <button class="btn ghost" id="help-copy">Privacy</button>
        </div>
    </div>
</footer>

<!-- Dialogs -->
<dialog id="settings-dialog" aria-labelledby="settings-title">
    <form class="dialog-form" method="dialog">
        <h3 id="settings-title">Settings</h3>

        <label class="field">
            <span>Max history entries</span>
            <input id="max-history" type="number" min="5" max="10000" />
        </label>

        <label class="checkbox">
            <input id="enable-notifications" type="checkbox" />
            <span>Enable reminder notifications</span>
        </label>

        <label class="checkbox">
            <input id="enable-sounds" type="checkbox" />
            <span>Enable interface sounds</span>
        </label>

        <div class="muted small">Data remains local. Use Export to back up. Import will merge entries.</div>

        <menu class="dialog-actions">
            <button id="save-settings" class="btn primary">Save</button>
            <button id="close-settings" class="btn">Close</button>
        </menu>
    </form>
</dialog>

<dialog id="help-dialog" aria-labelledby="help-title">
    <form class="dialog-form" method="dialog">
        <h3 id="help-title">Quick help</h3>
        <p class="muted">Select symptoms, set intensity, Analyze to view suggestions, then Save to keep an entry. Export regularly to backup.</p>
        <menu class="dialog-actions">
            <button id="close-help" class="btn">Close</button>
        </menu>
    </form>
</dialog>

<input id="file-input" type="file" accept="application/json" style="display:none" />

<script defer src="script.js"></script>
</body>
</html>
