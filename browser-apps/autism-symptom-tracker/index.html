<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width,initial-scale=1" name="viewport"/>
    <title>Autism Symptom & Emotion Tracker</title>
    <link href="style.css" rel="stylesheet"/>
    <meta content="Comprehensive autism symptom and emotion tracker with coping strategies, pattern recognition, and data visualization."
          name="description"/>
</head>
<body>
<a class="skip" href="#app">Skip to main content</a>
<header class="site-header">
    <div class="container header-row">
        <div>
            <h1>Autism Symptom & Emotion Tracker</h1>
            <p class="tagline">Track your feelings, identify patterns, and get personalized coping strategies.</p>
        </div>
        <div class="header-actions">
            <button aria-haspopup="true" class="btn" id="open-settings">Settings</button>
            <button class="btn" id="help-btn">Help</button>
        </div>
    </div>
</header>

<main class="container main-grid" id="app" role="main">
    <section aria-labelledby="symptom-heading" class="panel" id="symptom-panel">
        <h2 id="symptom-heading">Physical & Mental Symptoms</h2>

        <div aria-hidden="false" class="controls-row">
            <input aria-label="Filter symptoms" id="search" placeholder="Filter symptoms (type to search)"/>
            <button class="btn" id="clear-btn" title="Clear">Clear</button>
        </div>

        <form aria-describedby="symptom-help" id="symptom-form">
            <p class="muted" id="symptom-help">Select items that match how you feel. Each selected item can have an
                intensity from low to high.</p>
            <div aria-live="polite" class="symptom-list" id="symptom-list" role="group"></div>

            <div class="actions-row">
                <button class="btn primary" id="analyze-btn" type="button">Analyze</button>
                <button class="btn" id="save-btn" title="Save entry to local history" type="button">Save entry</button>
            </div>
        </form>
    </section>

    <section aria-labelledby="results-heading" class="panel" id="result-panel">
        <h2 id="results-heading">Suggestions & Insights</h2>
        <div class="result-summary muted" id="result-summary">No analysis yet. Pick symptoms and press Analyze.</div>

        <div aria-live="polite" class="suggestions" id="suggestions"></div>

        <div class="pattern-insights">
            <h3>Pattern Recognition</h3>
            <div class="pattern-insights-content" id="pattern-insights">
                <p class="muted">Pattern insights will appear here after multiple entries.</p>
            </div>
        </div>

        <details class="notes" id="explain-details">
            <summary>How this works</summary>
            <p>This app uses a weighted rule-matching system. Each checkbox maps to tags like "sensory" or "fatigue".
                Selected items can have an intensity that increases their weight. Tags with higher total weight surface
                first. This is not medical advice. If you are in crisis, contact local emergency services or a trusted
                professional.</p>
        </details>
    </section>

    <section aria-labelledby="history-heading" class="panel" id="history-panel">
        <h2 id="history-heading">History & Patterns</h2>
        <p class="muted">Saved entries are stored locally in your browser only. You can export JSON or CSV for
            backups.</p>

        <div class="export-actions">
            <button class="btn" id="export-csv-btn" title="Export history as CSV">Export CSV</button>
            <button class="btn" id="export-json-btn" title="Export as JSON">Export JSON</button>
            <button class="btn" id="import-json-btn" title="Import JSON backup">Import JSON</button>
        </div>

        <div aria-live="polite" class="history-list" id="history-list"></div>

        <div class="history-actions">
            <button class="btn" id="clear-history" title="Remove all saved entries">Clear All</button>
        </div>

        <div class="chart-wrap">
            <h3>Tag frequency (history)</h3>
            <canvas aria-label="Tag frequency chart" height="160" id="tag-chart" width="400"></canvas>
        </div>

        <div class="chart-wrap">
            <h3>Symptom patterns</h3>
            <canvas aria-label="Symptom frequency chart" height="160" id="symptom-chart" width="400"></canvas>
        </div>
    </section>
</main>

<footer class="site-footer">
    <div class="container">
        <small>Â© Autism Symptom Tracker - Jericho Crosby (Chalwk). Not medical advice.</small>
    </div>
</footer>

<!-- Settings / Help modals (simple in-page) -->
<dialog aria-labelledby="settings-title" id="settings-dialog">
    <form class="dialog-form" method="dialog">
        <h3 id="settings-title">Settings</h3>
        <label>
            Max history entries
            <input id="max-history" max="1000" min="5" type="number"/>
        </label>
        <label>
            <input id="enable-notifications" type="checkbox"/>
            Enable reminder notifications
        </label>
        <label>
            <input id="enable-sounds" type="checkbox"/>
            Enable interface sounds
        </label>
        <div class="muted" style="margin-top:8px">Data remains local. Use Export to back up. Import will merge
            entries.
        </div>
        <menu class="dialog-actions">
            <button class="btn primary" id="save-settings">Save</button>
            <button class="btn" id="close-settings">Close</button>
        </menu>
    </form>
</dialog>

<dialog aria-labelledby="help-title" id="help-dialog">
    <form class="dialog-form" method="dialog">
        <h3 id="help-title">Quick help</h3>
        <p class="muted">Select symptoms that match how you feel. Set intensity if needed. Analyze first to see
            suggestions, then Save to keep an entry. Export frequently if you want backups.</p>
        <menu class="dialog-actions">
            <button class="btn" id="close-help">Close</button>
        </menu>
    </form>
</dialog>

<input accept="application/json" id="file-input" style="display:none" type="file"/>

<script defer src="script.js"></script>
</body>
</html>