<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lua Script Directory | Chalwk's Blog</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Source+Code+Pro:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../website/styles/hsp-page-style.css">
</head>
<body>

<!-- Header -->
<header class="header">
    <a href="#" class="logo">
        <i class="fas fa-code"></i>
        Chalwk
    </a>

    <ul class="nav-links">
        <li><a href="../index.html">Home</a></li>
        <li><a href="#" class="active">Scripts</a></li>
        <li><a href="../index.html#contact">Contact</a></li>
    </ul>

    <a href="../index.html#blog" class="back-btn">
        <i class="fas fa-arrow-left"></i>
        Back to Blog
    </a>
</header>

<!-- Main Content -->
<div class="container">
    <div class="page-title">
        <h1>Lua Script Directory</h1>
        <p>Browse and download Lua scripts for Halo PC/CE SAPP and Phasor servers</p>
    </div>

    <!-- Script Grid -->
    <div class="script-grid">
        <!-- Script 1 -->
        <div class="script-card">
            <div class="script-header">
                <h3><i class="fas fa-shield-alt"></i> Admin Tools</h3>
                <p>Essential utilities for server administration</p>
                <div class="script-meta">
                    <span><i class="fas fa-user"></i> Chalwk</span>
                    <span><i class="fas fa-calendar"></i> Aug 12, 2025</span>
                    <span><i class="fas fa-download"></i> 142</span>
                </div>
            </div>
            <div class="script-content">
                <div class="script-description">
                    <p>A comprehensive suite of admin tools including player management, ban systems, and server monitoring utilities.</p>
                </div>
                <div class="script-actions">
                    <button class="action-btn view-btn" data-script="admin-tools">
                        <i class="fas fa-eye"></i> View Script
                    </button>
                    <button class="action-btn copy-btn" data-clipboard-target="#admin-tools">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <button class="action-btn download-btn" data-download="admin-tools.lua">
                        <i class="fas fa-download"></i> Download
                    </button>
                </div>
            </div>
        </div>

        <!-- Script 2 -->
        <div class="script-card">
            <div class="script-header">
                <h3><i class="fas fa-gamepad"></i> Gun Game</h3>
                <p>Popular progressive weapon game mode</p>
                <div class="script-meta">
                    <span><i class="fas fa-user"></i> Chalwk</span>
                    <span><i class="fas fa-calendar"></i> Jul 28, 2025</span>
                    <span><i class="fas fa-download"></i> 217</span>
                </div>
            </div>
            <div class="script-content">
                <div class="script-description">
                    <p>Implement the popular Gun Game mode where players progress through weapons with each kill.</p>
                </div>
                <div class="script-actions">
                    <button class="action-btn view-btn" data-script="gun-game">
                        <i class="fas fa-eye"></i> View Script
                    </button>
                    <button class="action-btn copy-btn" data-clipboard-target="#gun-game">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <button class="action-btn download-btn" data-download="gun-game.lua">
                        <i class="fas fa-download"></i> Download
                    </button>
                </div>
            </div>
        </div>

        <!-- Script 3 -->
        <div class="script-card">
            <div class="script-header">
                <h3><i class="fas fa-tachometer-alt"></i> Performance Monitor</h3>
                <p>Server performance tracking and reporting</p>
                <div class="script-meta">
                    <span><i class="fas fa-user"></i> Chalwk</span>
                    <span><i class="fas fa-calendar"></i> Aug 5, 2025</span>
                    <span><i class="fas fa-download"></i> 89</span>
                </div>
            </div>
            <div class="script-content">
                <div class="script-description">
                    <p>Monitor server performance metrics including FPS, memory usage, and network statistics in real-time.</p>
                </div>
                <div class="script-actions">
                    <button class="action-btn view-btn" data-script="performance-monitor">
                        <i class="fas fa-eye"></i> View Script
                    </button>
                    <button class="action-btn copy-btn" data-clipboard-target="#performance-monitor">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <button class="action-btn download-btn" data-download="performance-monitor.lua">
                        <i class="fas fa-download"></i> Download
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Script Detail View -->
    <div class="script-detail" id="scriptDetail">
        <div class="script-detail-header">
            <h2 id="scriptTitle">Admin Tools</h2>
            <button class="close-btn" id="closeDetail">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="script-description">
            <p id="scriptFullDescription">A comprehensive suite of admin tools including player management, ban systems, and server monitoring utilities. This script provides essential functionality for maintaining a healthy server environment and managing player behavior effectively.</p>
        </div>

        <div class="code-container">
            <div class="code-header">
                <div>script.lua</div>
                <div class="code-actions">
                    <button class="copy-code" id="copyCodeBtn">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <button class="download-code" id="downloadCodeBtn">
                        <i class="fas fa-download"></i> Download
                    </button>
                </div>
            </div>
            <pre><code class="language-lua" id="scriptCode"></code></pre>
        </div>
    </div>
</div>

<!-- Toast Notification -->
<div class="toast" id="toast">
    <i class="fas fa-check-circle"></i>
    <span>Code copied to clipboard!</span>
</div>

<!-- Footer -->
<footer class="footer">
    <p>&copy; 2025 Chalwk. All rights reserved.</p>
    <p>Halo Script Projects - Enhancing Halo PC/CE server experiences</p>
    <div class="social-links">
        <a href="#"><i class="fab fa-github"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-discord"></i></a>
        <a href="#"><i class="fab fa-youtube"></i></a>
    </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script>
    // Initialize syntax highlighting
    hljs.highlightAll();

    // Global cache for scripts and metadata
    const scriptCache = {};
    let scriptMetadata = {};

    // Load script metadata on page load
    fetch('scripts.json')
        .then(response => response.json())
        .then(metadata => {
            scriptMetadata = metadata;
        })
        .catch(error => {
            console.error('Error loading script metadata:', error);
        });

    // Fetch Lua script content
    function fetchScript(scriptId) {
        if (!scriptMetadata[scriptId]) {
            console.error('Metadata not found for script:', scriptId);
            return Promise.reject('Metadata missing');
        }

        const filename = scriptMetadata[scriptId].filename;
        return fetch(`scripts/${filename}`)
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.text();
            })
            .then(data => {
                scriptCache[scriptId] = data;
                return data;
            });
    }

    // Get script content (uses cache if available)
    function getScript(scriptId, callback) {
        if (scriptCache[scriptId]) {
            callback(scriptCache[scriptId]);
        } else {
            fetchScript(scriptId)
                .then(code => callback(code))
                .catch(error => console.error('Error loading script:', error));
        }
    }

    // Show script detail
    document.querySelectorAll('.view-btn').forEach(button => {
        button.addEventListener('click', function() {
            const scriptId = this.getAttribute('data-script');
            const meta = scriptMetadata[scriptId];

            if (!meta) {
                console.error('Script metadata not found:', scriptId);
                return;
            }

            getScript(scriptId, code => {
                document.getElementById('scriptTitle').textContent = meta.title;
                document.getElementById('scriptFullDescription').textContent = meta.description;
                document.getElementById('scriptCode').textContent = code;
                hljs.highlightElement(document.getElementById('scriptCode'));
                document.getElementById('downloadCodeBtn').setAttribute('data-script', scriptId);
                document.getElementById('scriptDetail').style.display = 'block';
                document.getElementById('scriptDetail').scrollIntoView({ behavior: 'smooth' });
            });
        });
    });

    // Close script detail
    document.getElementById('closeDetail').addEventListener('click', function() {
        document.getElementById('scriptDetail').style.display = 'none';
    });

    // Copy code to clipboard
    document.getElementById('copyCodeBtn').addEventListener('click', function() {
        const code = document.getElementById('scriptCode').textContent;
        navigator.clipboard.writeText(code).then(() => {
            showToast('Code copied to clipboard!');
        });
    });

    // Download code from detail view
    document.getElementById('downloadCodeBtn').addEventListener('click', function() {
        const scriptId = this.getAttribute('data-script');
        const meta = scriptMetadata[scriptId];
        if (!meta) return;

        const code = scriptCache[scriptId];
        if (!code) return;

        const blob = new Blob([code], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = meta.filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        showToast('Download started!');
    });

    // Copy button on cards
    document.querySelectorAll('.copy-btn').forEach(button => {
        button.addEventListener('click', function() {
            const scriptId = this.getAttribute('data-script');
            getScript(scriptId, code => {
                navigator.clipboard.writeText(code).then(() => {
                    showToast('Code copied to clipboard!');
                });
            });
        });
    });

    // Download button on cards
    document.querySelectorAll('.download-btn').forEach(button => {
        button.addEventListener('click', function() {
            const scriptId = this.getAttribute('data-script');
            const meta = scriptMetadata[scriptId];
            if (!meta) return;

            getScript(scriptId, code => {
                const blob = new Blob([code], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = meta.filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                showToast('Download started!');
            });
        });
    });

    // Show toast notification
    function showToast(message) {
        const toast = document.getElementById('toast');
        toast.querySelector('span').textContent = message;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 3000);
    }
</script>
</body>
</html>